@page "/report"
@using System.IO;
@using Blazor.FileReader;
@inject IFileReaderService fileReaderService;

<h3>Report</h3>

<input class="form-control-file w-50" type="file" @ref="@inputTypeFileElement" />
<button class="btn btn-primary mt-2" @onclick="@ReadFile">Upload</button>

@code {
    ElementRef inputTypeFileElement;
    byte[] buffer;


    public async Task ReadFile()
    {
        foreach (var file in await fileReaderService.CreateReference(inputTypeFileElement).EnumerateFilesAsync())
        {
            // Read into buffer and act (uses less memory)
            using(Stream stream = await file.OpenReadAsync()) {
                // Do (async) stuff with stream...
                await stream.ReadAsync(buffer, 0, (int)stream.Length);
            }

        }
    }
}
